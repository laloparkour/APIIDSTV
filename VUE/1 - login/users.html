<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
</head>
<body>

    <div id="contenedor">
        <h1>
            Bienvenido {{ user }}
        </h1>

        <!-- Botón para añadir un nuevo usuario -->
        <button class="btn btn-success" @click="showHide" v-if="showBtn">Agregar nuevo usuario</button>

        <table class="table" v-if="showTable">
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Username</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Website</th>
              <th>Actions</th>
            </tr>
            <tr v-for="u in users">
                <td>{{ u.id }}</td>
                <td>{{ u.name }}</td>
                <td>{{ u.username }}</td>
                <td>{{ u.email }}</td>
                <td>{{ u.phone }}</td>
                <td>{{ u.website }}</td>
                <td>
                    <button class="btn btn-primary">Ver</button>
                    <button class="btn btn-danger">Eliminar</button>
                </td>
            </tr>
          </table>

          <form action="" v-if="showForm">
            <legend>
                Datos personales
            </legend>
            <label>Name</label>
            <input type="text" v-model="name">
            <br>
            <label>Username</label>
            <input type="text" v-model="username">
            <br>
            <label>Password</label>
            <input type="password" v-model="password">
            <br>
            <label>Email</label>
            <input type="email" v-model="email">
            <br>
            <label>Phone</label>
            <input type="tel" v-model="phone">
            <br>
            <label>website</label>
            <input type="text" v-model="website">
            <br>
            <button class="btn btn-success" @click="guardar">
                Guardar
            </button>
            <button class="btn btn-warning" @click="cancelar">Cancelar</button>
        </form>

    </div>

    <script src="https://unpkg.com/vue@3"></script>
    <script type="text/javascript">

        const { createApp } = Vue;

        const { app } = createApp({
            data() {
                return {
                    users: null,
                    user: '',
                    id: 10,
                    name: '',
                    username: '',
                    password: '',
                    email: '',
                    phone: '',
                    website: '',
                    showBtn: true,
                    showTable: true,
                    showForm: false,
                }
            },
            methods: {
                showHide() {
                    this.showBtn = !this.showBtn;
                    this.showTable = !this.showTable;
                    this.showForm = !this.showForm;
                },
                guardar(e){
                    console.log("Guardar");
                    e.preventDefault();
                },
                cancelar(e){
                    console.log("Cancelar");
                    this.showBtn = !this.showBtn;
                    this.showTable = !this.showTable;
                    this.showForm = !this.showForm;

                    this.name = '';
                    this.username = '';
                    this.password = '';
                    this.email = '';
                    this.phone = '';
                    this.website = '';

                    e.preventDefault();
                }
            },
            mounted() {

                let user = localStorage.getItem('user');
                user = JSON.parse(user);

                this.user = user.name;

                fetch('data/users.json')
                .then((res) => res.json())
                .then((json) => ( this.users = json ))
                .catch((err) => ( alert('no data') ))
            },
        }).mount('#contenedor');

        // mount =  es un objeto de tipo vue y despues se lo montamos al contenedor

        // mounted = es algo que se va ejecutar cuando el evento del montado de vue se ejecute por lo tanto se va a ejecutar la primera vez cuando vue se ejecute, dentro de mounted se pueden crear metodo y invocarlos

    </script>
</body>
</html>